import sys
import socket
import random
import string
import time
from threading import Thread

ipaddr = sys.argv[1]
port = sys.argv[2]

def genimei():
    return random.randrange(100000000000000,999999999999999)

def sendmsg():
    sender = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    sender.connect((ipaddr, string.atoi(port)))
    sender.send("$LOGIN:"+str(genimei())+":DK-PE100:DKP-PEV1.0\r\n")
    time.sleep(1)
    sender.close()

starttime=time.clock()
for i in range(4):
    thread = Thread(target=sendmsg)
    thread.start()
    thread.join()
    

print time.clock()-starttime
